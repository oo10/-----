<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>帮帮-校园众筹</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
    <meta name="apple-mobile-web-app-capable" content="yes" />    
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />    
    <meta content="telephone=no" name="format-detection" />
    <link rel="stylesheet" href="css/responsive-nav.css">
    <link rel="stylesheet" href="css/nav-styles.css">
    <script src="js/responsive-nav.js"></script>
<style type="text/css">
img{border:0;*display:inline;}
li{border:0; list-style-type :none;}
ul{list-style:none; margin:0; padding:0;}
body{overflow-x:hidden; margin:0 auto; padding:0; width: 100%; height: 100%;} .WSCSlideWrapper{width:100%; position: relative;margin:0 auto;//cursor:move;}
.h1-title{background:#2c7;}
.color1{background-color: #ffbe32;}
.color2{background-color: #fea295;}
.color3{background-color: #62c3ee;}
.color4{background-color: #7995c9;}
.slid-box{width:100%;height:100px; border-top: 1px solid #cbcaca; border-bottom: 1px solid #cbcaca; background-color: #fff;}
.slid-box ul{margin-top:15px;}
.slid-box ul li{float: left; text-align: center; width: 25%; margin: 5px 0;list-style:none;}
.slid-box ul li a{display:block; text-align:center; width: 55px; height: 55px; border-radius: 999px; font-size: 14px; color: #fff; text-align: center; vertical-align: middle; margin: 0 auto;text-decoration:none;}
.slid-box ul li a:after{display: inline-block; content: ""; width: 0; height: 100%; vertical-align: middle;}
.slid-box span{display: inline-block; width: 30px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; vertical-align: middle; line-height: 1.2;}
</style>

<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
</head>

<body>
    <nav class="nav-collapse">
      <ul>
        <li><a style="background-color:#2c7"><b>帮帮</b><span onClick="document.location='zhongchou.html';">众筹</span><span class="nop">|</span><span>资源交换</span><span class="nop">|</span><span>跳蚤市场</span><span class="nop">|</span><span onClick="document.location='zaixianqiuzhu.html';">求助</span></a></li>
        <li><a style="background-color:#2c7"><b>资讯</b><span onClick="document.location='xiaoyuanhuodong.html';">活动</span><span class="nop">|</span><span>毕业寄语</span><span class="nop">|</span><span onClick="document.location='tongzhi.html';">班级管理</span><span class="nop">|</span><span onClick="document.location='jianzhi.html';">兼职</span></a></li>
        <li><a style="background-color:#2c7"><b>个人</b><span onClick="document.location='zhuce.html';">注册</span><span class="nop">|</span><span>我有话说</span><span class="nop">|</span><span>奋斗轨迹</span><span class="nop">|</span><span>遇见</span></a></li>
      </ul>
    </nav>
    <div id="main">
      <h1 class="h1-title">　　校园众筹</h1>
      <div class="WSCSlideWrapper" id="WSCSlideWrapper" >
          <div>
              <a  href="http://www.baidu.com"><img src="images/2.jpg" /></a>
              <a  href="http://m.tmall.com"><img src="images/3.jpg" /></a>
              <a href="http://huaban.com"><img src="images/4.jpg" /></a>			
          </div>  
      </div>
      <div id="con">
          <div class="slid-box">
              <ul>
                  <li><a href="#" class="color1"><span>公益项目</span></a></li>
                  <li><a href="#" class="color2"><span>志愿活动</span></a></li>
                  <li><a href="#" class="color3"><span>线下众筹</span></a></li>
                  <li><a href="#" class="color4"><span>其他分类</span></a></li>
              </ul>
          </div>
      </div>
    </div>
<!------------------touch-js------------------->
<script>
$(document).ready(function(){
	$('.WSCSlideWrapper').height($('.WSCSlideWrapper').width()*0.6);
	$('.WSCSlideWrapper').touchslide({timecontrol:3000,animatetime:300,direction:'left',navshow:true,canvassuport:true});
});
</script>
<script>
(function($){ 
$.fn.touchslide = function(options){ 
var defaults = { 
	timecontrol:3000,//图片停留时间
	animatetime:300, //图片滑动所需时间
	direction:'left', //轮播方向
	navshow:true,//是否显示图片导航栏
	canvassuport:true//图片导航栏是否开启cavas绘制圆
} 
var options = $.extend(defaults, options); 
var timecontrol = options.timecontrol||3000;
var animatetime = options.animatetime||300;
var direction = options.direction||'left';
var navshow = options.navshow;
this.each(function(){ 
	var slideWrapper=$(this);
	var slideImgWrapper = slideWrapper.children('div:first');
	var slideAs = slideImgWrapper.children('a');
	var slideImgs = slideAs.children('img');
	var imgcount = slideImgs.length;
	var imgcountrealy = slideImgs.length;
	var navimgs;
	var circlewrapper;
	var circles;
	var canvassuport = true;
	var circler = 0;
	var navimgsbuttom  = 0;
	if(imgcount>1){
		$((slideImgWrapper.html().split("/a>")[0]+"/a>"+slideImgWrapper.html().split("/a>")[1]+"/a>")).insertAfter(slideAs.last());
		if(navshow){
			$("<div class='navimgs'></div>").insertAfter(slideImgWrapper);
			navimgs = slideWrapper.children('div:last');
			navimgs.append("<div class='circlewrapper'></div>");
			circlewrapper = navimgs.children('div:first');
			for(var i=0;i<imgcountrealy;i++){
				circlewrapper.append("<canvas class='circle' width='15' height='15'></canvas>");
			}
			circles = circlewrapper.children('canvas');
			var myCanvas = circles[1];
			if (!myCanvas.getContext) 
			{ 
				canvassuport =false;
			}else 
			{ 
				canvassuport =options.canvassuport;			
			} 		
		}
	}	
	slideAs =  slideImgWrapper.children('a');
	slideImgs = slideAs.children('img');	
	imgcount = slideImgs.length;
	var slideWrapperWidth = slideWrapper.width();	
	var slideWrapperHeight = slideWrapper.height();
	slideWrapper.css({"overflow":"hidden","width":slideWrapperWidth,"height":slideWrapperHeight});
	slideImgWrapper.css({'position':"absolute","z-index":"1","overflow":"hidden","width":slideWrapperWidth*imgcount,"height":slideWrapperHeight});	
	slideAs.css({'position':"relative","overflow":"hidden","float":"left","width":slideWrapperWidth,"height":slideWrapperHeight});	
	slideImgs.css({'position':"relative","z-index":"1","width":slideWrapperWidth,"height":slideWrapperHeight});
	if(typeof(navimgs)!=='undefined'){
		if(navshow){
		if(slideWrapperWidth*0.03>15){
			circler=15;
		}else{
			circler = slideWrapperWidth*0.03;
		}
		if(slideWrapperHeight>360){
			navimgsbuttom=8;
		}else if(slideWrapperHeight>240){
			navimgsbuttom = 6;
		}else if(slideWrapperHeight>120){
			navimgsbuttom =4;
		}else{
			navimgsbuttom =2;
		}		
		navimgs.css({"position":"absolute","z-index":"3","overflow":"hidden","display":"block","width":slideWrapperWidth,"height":circler,"bottom":navimgsbuttom});
		circlewrapper.css({"position":"relative","overflow":"hidden","width":(slideWrapperWidth*0.05*imgcountrealy),"height":circler,"margin":"auto"});		
		circles.css({'position':"relative","float":"left","max-width":15,"max-height":15,"margin-left":slideWrapperWidth*0.01});			
		circles.attr("width",circler);
		circles.attr("height",circler);
		canvacircle(0);		
		for(var i=0;i<circles.length;i++){
			navclick(i);
		}	
		}else{
			navimgs.css({"display":"none"});
		}
	}		
	if(imgcount<4){
		return;
	}
	slideImgWrapper.css({'left':-slideWrapperWidth});
	var st;
	var sts;
	sts = setTimeout(function(){
		timedCount();
	},timecontrol);	
	
	slideWrapper.hover(function(){
			stopAll();
		},
		function(){
		sts = setTimeout(function(){
			timedCount();
		},timecontrol);
	});
	mouseDrag(slideWrapper);
	touchDrag(slideWrapper);
		
	function timedCount()
	{
		if(direction=='left'){
			turnleft();
		}if(direction=='right'){
			turnright();
		}		
		clearTimeout(st);
		st=setTimeout(function(){
			timedCount();		
		},timecontrol);
	}

	function stopCount()
	{
		if (st !=""){
			clearTimeout(st);
		}
	}
	
	function stopAll()
	{
		stopCount();
		clearTimeout(sts);
		slideImgWrapper.stop(true);
	}
	
	function navclick(navnum){
		circlewrapper.children('canvas:eq('+navnum+')').click(function(e){
				scideimgskip(navnum+1);
		})
	}
	
	function scideimgskip(imgnum){
		stopAll();
		turnleftwidth = imgnum*slideWrapperWidth;
		slideImgWrapper.stop(true).animate({left:-turnleftwidth},animatetime,function(){
			var imgnum = turnleftwidth/slideWrapperWidth-1;
			if(imgnum==0){
				imgnum=imgcountrealy;
			}
			if((imgnum-imgcountrealy)==0){
				imgnum=0;
			}
			canvacircle(imgnum);
		});	
	}
	
	function canvacircle(canvanum){
		circles.attr("width",circler);
		circles.attr("height",circler);
		for(var i=0;i<circles.length;i++){
			if(canvassuport){
				var navCanvas=circles[i];
				var cxt=navCanvas.getContext("2d");
				if(i==canvanum){
					cxt.fillStyle="#0182D7";	
				}else{
					cxt.fillStyle="#ddd";	
				}				
				cxt.arc(circler*0.5,circler*0.5,circler*0.5,0,Math.PI*2,true);
				cxt.closePath();
				cxt.fill(); 
			}else{
				circles.css("background","#ddd");				
				circlewrapper.children('canvas:eq('+canvanum+')').css("background","#0182D7");				
			}
			
		}
	}
	
	var turnleftwidth = slideWrapperWidth;
	function turnleft(){
		turnleftwidth = turnleftwidth+slideWrapperWidth;	
		if(turnleftwidth>(imgcount-2)*slideWrapperWidth){		
			slideImgWrapper.css({'left':0});
			turnleftwidth = slideWrapperWidth;
		}
		slideImgWrapper.stop(true).animate({left:-turnleftwidth},animatetime,function(){
			var imgnum = turnleftwidth/slideWrapperWidth-1;
			if(imgnum==0){
				imgnum=imgcountrealy;
			}
			if((imgnum-imgcountrealy)==0){
				imgnum=0;
			}
			canvacircle(imgnum);
		});				
	}
	function turnright(){	 
		turnleftwidth = turnleftwidth-slideWrapperWidth;	
		if(turnleftwidth==0){		
			slideImgWrapper.css({'left':-slideWrapperWidth*(imgcount-1)});
			turnleftwidth = slideWrapperWidth*(imgcount-2);
		}
		slideImgWrapper.stop(true).animate({left:-turnleftwidth},animatetime,function(){
			var imgnum = turnleftwidth/slideWrapperWidth-1;
			if(imgnum==0){
				imgnum=imgcountrealy;
			}
			if((imgnum-imgcountrealy)==0){
				imgnum=0;
			}
			canvacircle(imgnum);
		});				
	}
	
	var distanceX=0;		
		
	function toLeft(){
		if(turnleftwidth>(imgcount-3)*slideWrapperWidth){
			slideImgWrapper.css({"left":distanceX});
				turnleftwidth = 0;
			}
		turnleft(); 
		sts = setTimeout(function(){
			timedCount();
		},timecontrol);	
	}	
	
	function toRight(){
		if(turnleftwidth==slideWrapperWidth){
			slideImgWrapper.css({'left':-slideWrapperWidth*(imgcount-1)+distanceX});
			turnleftwidth = slideWrapperWidth*(imgcount-1);
		}
		turnright();	
		sts = setTimeout(function(){
			timedCount();
		},timecontrol);		
	}
		
	function mouseDrag($element) {
		var eventEle = $element;
		var stx = etx = curX = 0;
		var MAction = false;
		var ahrefs = [];		
		for(var i=0;i<slideAs.length;i++){
			if(typeof(slideImgWrapper.children('a:eq('+i+')').attr('href'))!=='undefined'){
				ahrefs.push(slideImgWrapper.children('a:eq('+i+')').attr('href'));
			}		
		}		
		eventEle.mouseover(function(){
			for(var i=0;i<slideAs.length;i++){
				if(typeof(slideImgWrapper.children('a:eq('+i+')').attr('href'))!=='undefined'){
					slideImgWrapper.children('a:eq('+i+')').attr('href',ahrefs[i]);
				}		
			}
		});
		eventEle.mousemove(function(event){			
			if(MAction){
			var changeX = event.pageX-stx;	
			slideImgWrapper.css({"left":-turnleftwidth+changeX});
			distanceX = changeX;
			}
			 event.preventDefault();
		}).mousedown(function(event){
			stopAll();
			MAction = true;
			stx = event.pageX;				
			 event.preventDefault();
		});
		eventEle.mouseup(function(event){
			etx = event.pageX;
			curX = etx-stx;
			MAction = false;
			if(curX>5){
				slideAs.attr("href","javascript:void(0)");
				toRight();
			}
			if(curX<-5){
				slideAs.attr("href","javascript:void(0)");
				toLeft();
			}
			 event.preventDefault();
		});
	}
	
    function touchDrag($element) {
        var gundongX = 0;
        var gundongY = 0;
        var moveEle = $element;
        var stx = sty = etx = ety = curX = curY = 0;
		
		var ImgWidth_arr = [];
		for (var i = 0; i < imgcount; i++) {
			ImgWidth_arr.push(i * slideWrapperWidth);
		}	
		
        moveEle.on("touchstart", function(event) { //touchstart
			stopAll();
            var event = event.originalEvent;
            gundongX = 0;
            gundongY = 0;
			//alert(etx);
            // 手指位置
            stx = event.touches[0].pageX;
            sty = event.touches[0].pageY;
        });
        moveEle.on("touchmove", function(event) {
            var event = event.originalEvent;
            // 防止拖动页面
            event.preventDefault();
            // 手指位置 减去 元素当前位置 就是 要移动的距离
            gundongX = event.touches[0].pageX - stx;
            gundongY = event.touches[0].pageY - sty;
            // 目标位置 就是 要移动的距离 加上 元素当前位置		
			slideImgWrapper.css({"left":-turnleftwidth+gundongX});
			distanceX = gundongX;
        });
        moveEle.on("touchend", function(event) {
			 if(Math.abs(gundongX)>5){
				event.preventDefault();
				if(gundongX>0){
					// 右滑
					toRight();
				}else{
					// 左滑
					toLeft();			
				}		   
			 }		
		 });
    }
}); 
}; 
})(jQuery);
</script>
<!-------------------nav-js-------------------->
    <script>
      var navigation = responsiveNav(".nav-collapse", {
        animate: true,                    // Boolean: Use CSS3 transitions, true or false
        transition: 284,                  // Integer: Speed of the transition, in milliseconds
        label: "Menu",                    // String: Label for the navigation toggle
        insert: "after",                  // String: Insert the toggle before or after the navigation
        customToggle: "",                 // Selector: Specify the ID of a custom toggle
        closeOnNavClick: false,           // Boolean: Close the navigation when one of the links are clicked
        openPos: "relative",              // String: Position of the opened nav, relative or static
        navClass: "nav-collapse",         // String: Default CSS class. If changed, you need to edit the CSS too!
        navActiveClass: "js-nav-active",  // String: Class that is added to <html> element when nav is active
        jsClass: "js",                    // String: 'JS enabled' class which is added to <html> element
        init: function(){},               // Function: Init callback
        open: function(){},               // Function: Open callback
        close: function(){}               // Function: Close callback
      });
    </script>

</body>
</html>
